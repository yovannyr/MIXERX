<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:MIXERX.MAUI.ViewModels"
             x:Class="MIXERX.MAUI.Views.MainPage2"
             x:DataType="vm:MainViewModel"
             BackgroundColor="#0A0A0A"
             Shell.NavBarIsVisible="False">

    <Grid RowDefinitions="40,*,250">
        
        <!-- Top Bar -->
        <Grid Grid.Row="0" BackgroundColor="#1A1A1A" ColumnDefinitions="Auto,*,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,*,Auto">
            <Label Grid.Column="0" Text="âš™" FontSize="20" Margin="10,0" VerticalOptions="Center"/>
            <Label Grid.Column="1" Text="1" FontSize="16" Margin="5,0" VerticalOptions="Center"/>
            <Label Grid.Column="2" Text="2" FontSize="16" Margin="5,0" VerticalOptions="Center" TextColor="#00D9FF"/>
            <Label Grid.Column="3" Text="Extended â–¼" FontSize="14" Margin="10,0" VerticalOptions="Center"/>
            <Label Grid.Column="4" Text="Link" FontSize="14" Margin="10,0" VerticalOptions="Center"/>
            <Label Grid.Column="5" Text="MIDI" FontSize="14" Margin="10,0" VerticalOptions="Center"/>
            <Button Grid.Column="6" Text="âš™" WidthRequest="30" HeightRequest="30" Margin="5,0"/>
            <Button Grid.Column="7" Text="REC" BackgroundColor="#FF0000" WidthRequest="50" HeightRequest="30" Margin="5,0" Command="{Binding StartRecordingCommand}"/>
            <Button Grid.Column="8" Text="FX" WidthRequest="40" HeightRequest="30" Margin="5,0"/>
            <Button Grid.Column="9" Text="ðŸŽ§" WidthRequest="40" HeightRequest="30" Margin="5,0"/>
            <StackLayout Grid.Column="10" Orientation="Horizontal" HorizontalOptions="End" Margin="10,0">
                <Label Text="MIXERX" FontSize="18" FontAttributes="Bold" VerticalOptions="Center" Margin="0,0,5,0" TextColor="#00FF88"/>
                <Label Text="PRO" FontSize="18" VerticalOptions="Center"/>
            </StackLayout>
            <Label Grid.Column="11" Text="11:21" FontSize="14" Margin="10,0" VerticalOptions="Center"/>
        </Grid>

        <!-- Main Deck Area -->
        <Grid Grid.Row="1" ColumnDefinitions="*,*">
            
            <!-- DECK 1 (Left) -->
            <Grid Grid.Column="0" RowDefinitions="Auto,Auto,*,Auto" Margin="5" BackgroundColor="#0D0D0D" BindingContext="{Binding DeckA}">
                
                <!-- Deck Header -->
                <Grid Grid.Row="0" ColumnDefinitions="Auto,*,Auto,Auto,Auto" Padding="10" BackgroundColor="#1A1A1A">
                    <Label Grid.Column="0" Text="1" FontSize="24" FontAttributes="Bold" TextColor="#00D9FF" VerticalOptions="Center"/>
                    <StackLayout Grid.Column="1" Margin="10,0">
                        <Label Text="{Binding TrackName}" FontSize="14" FontAttributes="Bold" TextColor="White"/>
                        <Label Text="DJ Wild" FontSize="12" TextColor="#888"/>
                    </StackLayout>
                    <Label Grid.Column="2" Text="{Binding Bpm}" FontSize="20" FontAttributes="Bold" TextColor="#00D9FF" VerticalOptions="Center" Margin="10,0"/>
                    <Button Grid.Column="3" Text="âœ" WidthRequest="30" HeightRequest="30"/>
                    <Label Grid.Column="4" Text="{Binding Key}" FontSize="16" FontAttributes="Bold" TextColor="#00FF88" VerticalOptions="Center" Margin="10,0"/>
                </Grid>

                <!-- Stems & Controls -->
                <Grid Grid.Row="1" ColumnDefinitions="Auto,*,Auto" Padding="5" BackgroundColor="#0A0A0A">
                    <Button Grid.Column="0" Text="âŸ²" WidthRequest="40" HeightRequest="40"/>
                    <Grid Grid.Column="1" ColumnDefinitions="*,*,*,*" ColumnSpacing="5">
                        <Frame Grid.Column="0" BackgroundColor="#0088FF" Padding="5" CornerRadius="5">
                            <StackLayout>
                                <Label Text="ðŸŽ¤" FontSize="16" HorizontalOptions="Center"/>
                                <Label Text="Vocal" FontSize="10" HorizontalOptions="Center"/>
                            </StackLayout>
                        </Frame>
                        <Frame Grid.Column="1" BackgroundColor="#0088FF" Padding="5" CornerRadius="5">
                            <StackLayout>
                                <Label Text="ðŸŽ¹" FontSize="16" HorizontalOptions="Center"/>
                                <Label Text="Melody" FontSize="10" HorizontalOptions="Center"/>
                            </StackLayout>
                        </Frame>
                        <Frame Grid.Column="2" BackgroundColor="#0088FF" Padding="5" CornerRadius="5">
                            <StackLayout>
                                <Label Text="ðŸŽ¸" FontSize="16" HorizontalOptions="Center"/>
                                <Label Text="Bass" FontSize="10" HorizontalOptions="Center"/>
                            </StackLayout>
                        </Frame>
                        <Frame Grid.Column="3" BackgroundColor="#0088FF" Padding="5" CornerRadius="5">
                            <StackLayout>
                                <Label Text="ðŸ¥" FontSize="16" HorizontalOptions="Center"/>
                                <Label Text="Drums" FontSize="10" HorizontalOptions="Center"/>
                            </StackLayout>
                        </Frame>
                    </Grid>
                    <StackLayout Grid.Column="2" Orientation="Horizontal" Spacing="5">
                        <Button Text="SYNC" BackgroundColor="{Binding IsSynced, Converter={StaticResource BoolToSyncColor}}" WidthRequest="60" HeightRequest="40" Command="{Binding SyncCommand}"/>
                        <Button Text="â—€" WidthRequest="40" HeightRequest="40"/>
                        <Button Text="{Binding PlayButtonText}" BackgroundColor="#00FF88" WidthRequest="40" HeightRequest="40" Command="{Binding PlayPauseCommand}"/>
                    </StackLayout>
                </Grid>

                <!-- Vinyl & Waveform -->
                <Grid Grid.Row="2" RowDefinitions="Auto,*,Auto">
                    <!-- Vinyl Display -->
                    <Grid Grid.Row="0" HeightRequest="200" Margin="10">
                        <Ellipse Fill="#1A1A1A" WidthRequest="180" HeightRequest="180" HorizontalOptions="Center" VerticalOptions="Center"/>
                        <StackLayout HorizontalOptions="Center" VerticalOptions="Center">
                            <Label Text="{Binding Bpm}" FontSize="32" FontAttributes="Bold" TextColor="White" HorizontalOptions="Center"/>
                            <Label Text="{Binding TempoDisplay}" FontSize="14" TextColor="#888" HorizontalOptions="Center"/>
                            <Label Text="Â±8" FontSize="12" TextColor="#888" HorizontalOptions="Center"/>
                            <Label Text="01:33.8" FontSize="18" TextColor="White" HorizontalOptions="Center" Margin="0,10,0,0"/>
                            <Label Text="03:21.6" FontSize="14" TextColor="#888" HorizontalOptions="Center"/>
                        </StackLayout>
                    </Grid>

                    <!-- Waveform -->
                    <Frame Grid.Row="1" BackgroundColor="#000" Padding="0" Margin="5">
                        <Grid RowDefinitions="*,Auto,*">
                            <BoxView Grid.Row="0" Color="#FF6B6B" HeightRequest="80"/>
                            <BoxView Grid.Row="1" Color="#00FF88" HeightRequest="40"/>
                            <BoxView Grid.Row="2" Color="#888" HeightRequest="60"/>
                        </Grid>
                    </Frame>

                    <!-- Loop Controls -->
                    <Grid Grid.Row="2" ColumnDefinitions="Auto,*,Auto" Padding="5">
                        <Button Grid.Column="0" Text="â—€" WidthRequest="40" Command="{Binding HalveLoopCommand}"/>
                        <Grid Grid.Column="1" ColumnDefinitions="*,*,*,*,*,*,*,*" ColumnSpacing="2">
                            <Button Grid.Column="0" Text="1/8" FontSize="10" HeightRequest="30" Command="{Binding AutoLoopCommand}" CommandParameter="0.125"/>
                            <Button Grid.Column="1" Text="1/4" FontSize="10" HeightRequest="30" Command="{Binding AutoLoopCommand}" CommandParameter="0.25"/>
                            <Button Grid.Column="2" Text="1/2" FontSize="10" HeightRequest="30" Command="{Binding AutoLoopCommand}" CommandParameter="0.5"/>
                            <Button Grid.Column="3" Text="1" FontSize="10" HeightRequest="30" Command="{Binding AutoLoopCommand}" CommandParameter="1"/>
                            <Button Grid.Column="4" Text="2" FontSize="10" HeightRequest="30" Command="{Binding AutoLoopCommand}" CommandParameter="2"/>
                            <Button Grid.Column="5" Text="4" FontSize="10" HeightRequest="30" BackgroundColor="#00D9FF" Command="{Binding AutoLoopCommand}" CommandParameter="4"/>
                            <Button Grid.Column="6" Text="8" FontSize="10" HeightRequest="30" Command="{Binding AutoLoopCommand}" CommandParameter="8"/>
                            <Button Grid.Column="7" Text="16" FontSize="10" HeightRequest="30" Command="{Binding AutoLoopCommand}" CommandParameter="16"/>
                        </Grid>
                        <Button Grid.Column="2" Text="â–¶" WidthRequest="40" Command="{Binding DoubleLoopCommand}"/>
                    </Grid>
                </Grid>

                <!-- Hot Cues & Pads -->
                <Grid Grid.Row="3" ColumnDefinitions="Auto,*" Padding="5" BackgroundColor="#0A0A0A">
                    <StackLayout Grid.Column="0" Spacing="5">
                        <Button Text="âŸ²" WidthRequest="40" HeightRequest="40"/>
                        <Button Text="+" WidthRequest="40" HeightRequest="40"/>
                        <Label Text="R" FontSize="20" HorizontalOptions="Center" VerticalOptions="Center"/>
                    </StackLayout>
                    <Grid Grid.Column="1" RowDefinitions="*,*" ColumnDefinitions="*,*,*,*" RowSpacing="5" ColumnSpacing="5">
                        <Button Grid.Row="0" Grid.Column="0" Text="1" BackgroundColor="#2A2A2A" FontSize="10" Command="{Binding TriggerCueCommand}" CommandParameter="1"/>
                        <Button Grid.Row="0" Grid.Column="1" Text="2" BackgroundColor="#2A2A2A" FontSize="10" Command="{Binding TriggerCueCommand}" CommandParameter="2"/>
                        <Button Grid.Row="0" Grid.Column="2" Text="3" BackgroundColor="#2A2A2A" FontSize="10" Command="{Binding TriggerCueCommand}" CommandParameter="3"/>
                        <Button Grid.Row="0" Grid.Column="3" Text="4" BackgroundColor="#2A2A2A" FontSize="10" Command="{Binding TriggerCueCommand}" CommandParameter="4"/>
                        <Label Grid.Row="1" Grid.Column="0" Text="45" FontSize="16" HorizontalOptions="Center" VerticalOptions="Center"/>
                    </Grid>
                </Grid>
            </Grid>

            <!-- DECK 2 (Right) - Mirror of Deck 1 -->
            <Grid Grid.Column="1" RowDefinitions="Auto,Auto,*,Auto" Margin="5" BackgroundColor="#0D0D0D">
                
                <!-- Deck Header -->
                <Grid Grid.Row="0" ColumnDefinitions="Auto,*,Auto,Auto,Auto" Padding="10" BackgroundColor="#1A1A1A">
                    <Label Grid.Column="0" Text="2" FontSize="24" FontAttributes="Bold" TextColor="#FF6B35" VerticalOptions="Center"/>
                    <StackLayout Grid.Column="1" Margin="10,0">
                        <Label Text="Just Cause I Don't Dance (Vocal Mix)" FontSize="14" FontAttributes="Bold" TextColor="White"/>
                        <Label Text="Weeks &amp; Company" FontSize="12" TextColor="#888"/>
                    </StackLayout>
                    <Label Grid.Column="2" Text="127" FontSize="20" FontAttributes="Bold" TextColor="#FF6B35" VerticalOptions="Center" Margin="10,0"/>
                    <Button Grid.Column="3" Text="âœ" WidthRequest="30" HeightRequest="30"/>
                    <Label Grid.Column="4" Text="6A" FontSize="16" FontAttributes="Bold" TextColor="#FF6B6B" VerticalOptions="Center" Margin="10,0"/>
                </Grid>

                <!-- Stems & Controls -->
                <Grid Grid.Row="1" ColumnDefinitions="Auto,*,Auto" Padding="5" BackgroundColor="#0A0A0A">
                    <StackLayout Grid.Column="0" Orientation="Horizontal" Spacing="5">
                        <Button Text="SYNC" BackgroundColor="#2A2A2A" WidthRequest="60" HeightRequest="40"/>
                        <Button Text="â—€" WidthRequest="40" HeightRequest="40"/>
                        <Button Text="â–¶" BackgroundColor="#00FF88" WidthRequest="40" HeightRequest="40"/>
                    </StackLayout>
                    <Grid Grid.Column="1" ColumnDefinitions="*,*,*,*" ColumnSpacing="5">
                        <Frame Grid.Column="0" BackgroundColor="#0088FF" Padding="5" CornerRadius="5">
                            <StackLayout>
                                <Label Text="ðŸŽ¤" FontSize="16" HorizontalOptions="Center"/>
                                <Label Text="Vocal" FontSize="10" HorizontalOptions="Center"/>
                            </StackLayout>
                        </Frame>
                        <Frame Grid.Column="1" BackgroundColor="#2A2A2A" Padding="5" CornerRadius="5">
                            <StackLayout>
                                <Label Text="ðŸŽ¹" FontSize="16" HorizontalOptions="Center"/>
                                <Label Text="Melody" FontSize="10" HorizontalOptions="Center"/>
                            </StackLayout>
                        </Frame>
                        <Frame Grid.Column="2" BackgroundColor="#2A2A2A" Padding="5" CornerRadius="5">
                            <StackLayout>
                                <Label Text="ðŸŽ¸" FontSize="16" HorizontalOptions="Center"/>
                                <Label Text="Bass" FontSize="10" HorizontalOptions="Center"/>
                            </StackLayout>
                        </Frame>
                        <Frame Grid.Column="3" BackgroundColor="#2A2A2A" Padding="5" CornerRadius="5">
                            <StackLayout>
                                <Label Text="ðŸ¥" FontSize="16" HorizontalOptions="Center"/>
                                <Label Text="Drums" FontSize="10" HorizontalOptions="Center"/>
                            </StackLayout>
                        </Frame>
                    </Grid>
                    <Button Grid.Column="2" Text="âŸ²" WidthRequest="40" HeightRequest="40"/>
                </Grid>

                <!-- Vinyl & Waveform -->
                <Grid Grid.Row="2" RowDefinitions="Auto,*,Auto">
                    <!-- Vinyl Display -->
                    <Grid Grid.Row="0" HeightRequest="200" Margin="10">
                        <Ellipse Fill="#1A1A1A" WidthRequest="180" HeightRequest="180" HorizontalOptions="Center" VerticalOptions="Center"/>
                        <StackLayout HorizontalOptions="Center" VerticalOptions="Center">
                            <Label Text="126.7" FontSize="32" FontAttributes="Bold" TextColor="White" HorizontalOptions="Center"/>
                            <Label Text="-0.6%" FontSize="14" TextColor="#888" HorizontalOptions="Center"/>
                            <Label Text="Â±8" FontSize="12" TextColor="#888" HorizontalOptions="Center"/>
                            <Label Text="02:04.4" FontSize="18" TextColor="White" HorizontalOptions="Center" Margin="0,10,0,0"/>
                            <Label Text="03:40.1" FontSize="14" TextColor="#888" HorizontalOptions="Center"/>
                        </StackLayout>
                    </Grid>

                    <!-- Waveform -->
                    <Frame Grid.Row="1" BackgroundColor="#000" Padding="0" Margin="5">
                        <Grid RowDefinitions="*,Auto,*">
                            <BoxView Grid.Row="0" Color="#FF6B6B" HeightRequest="80"/>
                            <BoxView Grid.Row="1" Color="#00FF88" HeightRequest="40"/>
                            <BoxView Grid.Row="2" Color="#888" HeightRequest="60"/>
                        </Grid>
                    </Frame>

                    <!-- Loop Controls -->
                    <Grid Grid.Row="2" ColumnDefinitions="Auto,*,Auto" Padding="5">
                        <Button Grid.Column="0" Text="â—€" WidthRequest="40"/>
                        <Grid Grid.Column="1" ColumnDefinitions="*,*,*,*,*,*,*,*" ColumnSpacing="2">
                            <Button Grid.Column="0" Text="1/8" FontSize="10" HeightRequest="30"/>
                            <Button Grid.Column="1" Text="1/4" FontSize="10" HeightRequest="30"/>
                            <Button Grid.Column="2" Text="1/2" FontSize="10" HeightRequest="30"/>
                            <Button Grid.Column="3" Text="1" FontSize="10" HeightRequest="30"/>
                            <Button Grid.Column="4" Text="2" FontSize="10" HeightRequest="30"/>
                            <Button Grid.Column="5" Text="4" FontSize="10" HeightRequest="30" BackgroundColor="#FF6B35"/>
                            <Button Grid.Column="6" Text="8" FontSize="10" HeightRequest="30"/>
                            <Button Grid.Column="7" Text="16" FontSize="10" HeightRequest="30"/>
                        </Grid>
                        <Button Grid.Column="2" Text="â–¶" WidthRequest="40"/>
                    </Grid>
                </Grid>

                <!-- Hot Cues & Pads -->
                <Grid Grid.Row="3" ColumnDefinitions="*,Auto" Padding="5" BackgroundColor="#0A0A0A">
                    <Grid Grid.Column="0" RowDefinitions="*,*" ColumnDefinitions="*,*,*,*" RowSpacing="5" ColumnSpacing="5">
                        <Button Grid.Row="0" Grid.Column="0" Text="Vocal\nEcho" BackgroundColor="#2A2A2A" FontSize="10"/>
                        <Button Grid.Row="0" Grid.Column="1" Text="Instrume...\nEcho" BackgroundColor="#2A2A2A" FontSize="10"/>
                        <Button Grid.Row="0" Grid.Column="2" Text="Instrume...\nEcho" BackgroundColor="#2A2A2A" FontSize="10"/>
                        <Button Grid.Row="0" Grid.Column="3" Text="Drums\nEcho" BackgroundColor="#2A2A2A" FontSize="10"/>
                        <Label Grid.Row="1" Grid.Column="3" Text="47" FontSize="16" HorizontalOptions="Center" VerticalOptions="Center"/>
                    </Grid>
                    <StackLayout Grid.Column="1" Spacing="5">
                        <Button Text="âŸ²" WidthRequest="40" HeightRequest="40"/>
                        <Button Text="+" WidthRequest="40" HeightRequest="40"/>
                        <Label Text="R" FontSize="20" HorizontalOptions="Center" VerticalOptions="Center"/>
                    </StackLayout>
                </Grid>
            </Grid>
        </Grid>

        <!-- Library Section -->
        <Grid Grid.Row="2" BackgroundColor="#0A0A0A" ColumnDefinitions="200,*" Padding="5">
            <!-- Sidebar -->
            <StackLayout Grid.Column="0" BackgroundColor="#0D0D0D" Padding="5">
                <Label Text="âš™ All..." TextColor="White" Margin="0,5"/>
                <Label Text="ðŸ”Š All Audio..." TextColor="White" Margin="0,5"/>
                <Label Text="ðŸŽ¬ All Videos..." TextColor="White" Margin="0,5"/>
                <Label Text="ðŸŽµ iTunes" TextColor="White" Margin="0,5"/>
                <Label Text="â‰¡ Stems" TextColor="#00D9FF" BackgroundColor="#1A3A4A" Padding="5" Margin="0,5"/>
                <Label Text="ðŸŽµ Beatport" TextColor="White" Margin="0,5"/>
                <Label Text="ðŸŽµ Beatsource" TextColor="White" Margin="0,5"/>
                <Label Text="â˜ SoundCloud" TextColor="White" Margin="0,5"/>
                <Label Text="ðŸŽµ TIDAL" TextColor="White" Margin="0,5"/>
            </StackLayout>

            <!-- Track List -->
            <Grid Grid.Column="1" RowDefinitions="Auto,*">
                <Grid Grid.Row="0" ColumnDefinitions="*,Auto,Auto,Auto,Auto" Padding="5" BackgroundColor="#1A1A1A">
                    <Label Grid.Column="0" Text="Analyze Files" VerticalOptions="Center"/>
                    <Button Grid.Column="1" Text="Files" WidthRequest="60" HeightRequest="30" Margin="2"/>
                    <Button Grid.Column="2" Text="Browse" WidthRequest="70" HeightRequest="30" Margin="2"/>
                    <Button Grid.Column="3" Text="Prepare" WidthRequest="70" HeightRequest="30" Margin="2"/>
                    <Button Grid.Column="4" Text="History" WidthRequest="70" HeightRequest="30" Margin="2"/>
                </Grid>

                <CollectionView Grid.Row="1" BackgroundColor="#0D0D0D">
                    <CollectionView.ItemsSource>
                        <x:Array Type="{x:Type x:String}">
                            <x:String>Track 1</x:String>
                            <x:String>Track 2</x:String>
                            <x:String>Track 3</x:String>
                        </x:Array>
                    </CollectionView.ItemsSource>
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Grid ColumnDefinitions="40,*,80,60,60,80" Padding="5" BackgroundColor="#0D0D0D">
                                <Label Grid.Column="0" Text="â‰¡" VerticalOptions="Center"/>
                                <Label Grid.Column="1" Text="{Binding}" TextColor="#00D9FF" VerticalOptions="Center"/>
                                <Label Grid.Column="2" Text="120" TextColor="#00D9FF" VerticalOptions="Center"/>
                                <Label Grid.Column="3" Text="3B" TextColor="#00FF88" VerticalOptions="Center"/>
                                <Label Grid.Column="4" Text="2" VerticalOptions="Center"/>
                                <Label Grid.Column="5" Text="04:58.40" TextColor="#00D9FF" VerticalOptions="Center"/>
                            </Grid>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Grid>
        </Grid>
        
    </Grid>

</ContentPage>
